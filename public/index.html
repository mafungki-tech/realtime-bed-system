<!DOCTYPE html>
<html lang="zh-HK">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>1A IV Cap</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .bed {
            transition: all 0.3s ease;
            user-select: none;
        }
        .bed.on {
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        .team-container {
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }
        
        /* æ§åˆ¶æŒ‰éˆ•æ¨£å¼ */
        .control-btn {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background-color: #dc2626;
            color: white;
            border: none;
            font-size: 24px;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            transition: all 0.3s ease;
            z-index: 1000;
        }
        
        .control-btn:hover {
            background-color: #b91c1c;
            transform: scale(1.1);
        }
        
        .control-btn.locked {
            background-color: #4f46e5;
        }
        
        .control-btn.locked:hover {
            background-color: #3730a3;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen font-sans">
    
    <div class="container mx-auto px-4 py-8">
        <h1 class="text-4xl font-bold text-center text-indigo-800 mb-8">ğŸ¥ 1A IV cap</h1>

        <!-- æ§åˆ¶é¢æ¿ -->
        <div class="bg-white rounded-lg shadow-lg p-6 mb-8">
            
            <div class="flex flex-wrap items-center justify-center gap-4">
                <div class="text-gray-600">
                    <span class="font-medium">æœ‰IV cap ç—…äººäººæ•¸:</span> <span id="total-used" class="text-red-600 font-bold text-xl">0</span>
                </div>
                <div class="text-gray-600">
                    <span class="font-medium">æœ€å¾Œæ›´æ–°æ™‚é–“:</span> <span id="last-update" class="text-green-600 font-mono">å°šæœªæ›´æ–°</span>
                </div>
            </div>
            
            <div class="mt-4 text-center">
                <div class="inline-flex items-center gap-4 text-sm text-gray-600">
                    <div class="flex items-center gap-2">
                        <div class="w-4 h-4 bg-white border border-gray-300 rounded"></div>
                        <span>No IV Cap</span>
                    </div>
                    <div class="flex items-center gap-2">
                        <div class="w-4 h-4 bg-yellow-400 rounded"></div>
                        <span>with IV cap</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Team 1 -->
        <div class="team-container bg-white rounded-lg p-6 mb-6">
            <h2 class="text-2xl font-bold text-center text-blue-700 mb-4">Team 1</h2>
            <div class="grid grid-cols-5 sm:grid-cols-8 md:grid-cols-10 lg:grid-cols-15 gap-3">
                <div class="bed bg-white border-2 border-gray-300 hover:border-blue-400 rounded-lg p-4 text-center cursor-pointer text-lg font-semibold" data-bed="1">1</div>
                <div class="bed bg-white border-2 border-gray-300 hover:border-blue-400 rounded-lg p-4 text-center cursor-pointer text-lg font-semibold" data-bed="2">2</div>
                <div class="bed bg-white border-2 border-gray-300 hover:border-blue-400 rounded-lg p-4 text-center cursor-pointer text-lg font-semibold" data-bed="3">3</div>
                <div class="bed bg-white border-2 border-gray-300 hover:border-blue-400 rounded-lg p-4 text-center cursor-pointer text-lg font-semibold" data-bed="4">4</div>
                <div class="bed bg-white border-2 border-gray-300 hover:border-blue-400 rounded-lg p-4 text-center cursor-pointer text-lg font-semibold" data-bed="5">5</div>
                <div class="bed bg-white border-2 border-gray-300 hover:border-blue-400 rounded-lg p-4 text-center cursor-pointer text-lg font-semibold" data-bed="6">6</div>
                <div class="bed bg-white border-2 border-gray-300 hover:border-blue-400 rounded-lg p-4 text-center cursor-pointer text-lg font-semibold" data-bed="7">7</div>
                <div class="bed bg-white border-2 border-gray-300 hover:border-blue-400 rounded-lg p-4 text-center cursor-pointer text-lg font-semibold" data-bed="8">8</div>
                <div class="bed bg-white border-2 border-gray-300 hover:border-blue-400 rounded-lg p-4 text-center cursor-pointer text-lg font-semibold" data-bed="9">9</div>
                <div class="bed bg-white border-2 border-gray-300 hover:border-blue-400 rounded-lg p-4 text-center cursor-pointer text-lg font-semibold" data-bed="10">10</div>
                <div class="bed bg-white border-2 border-gray-300 hover:border-blue-400 rounded-lg p-4 text-center cursor-pointer text-lg font-semibold" data-bed="11">11</div>
                <div class="bed bg-white border-2 border-gray-300 hover:border-blue-400 rounded-lg p-4 text-center cursor-pointer text-lg font-semibold" data-bed="12">12</div>
                <div class="bed bg-white border-2 border-gray-300 hover:border-blue-400 rounded-lg p-4 text-center cursor-pointer text-lg font-semibold" data-bed="13">13</div>
                <div class="bed bg-white border-2 border-gray-300 hover:border-blue-400 rounded-lg p-4 text-center cursor-pointer text-lg font-semibold" data-bed="14">14</div>
                <div class="bed bg-white border-2 border-gray-300 hover:border-blue-400 rounded-lg p-4 text-center cursor-pointer text-lg font-semibold" data-bed="15">15</div>
            </div>
        </div>

        <!-- Team 2 -->
        <div class="team-container bg-white rounded-lg p-6 mb-6">
            <h2 class="text-2xl font-bold text-center text-green-700 mb-4">Team 2</h2>
            <div class="grid grid-cols-5 sm:grid-cols-8 md:grid-cols-10 lg:grid-cols-15 gap-3">
                <div class="bed bg-white border-2 border-gray-300 hover:border-green-400 rounded-lg p-4 text-center cursor-pointer text-lg font-semibold" data-bed="16">16</div>
                <div class="bed bg-white border-2 border-gray-300 hover:border-green-400 rounded-lg p-4 text-center cursor-pointer text-lg font-semibold" data-bed="17">17</div>
                <div class="bed bg-white border-2 border-gray-300 hover:border-green-400 rounded-lg p-4 text-center cursor-pointer text-lg font-semibold" data-bed="18">18</div>
                <div class="bed bg-white border-2 border-gray-300 hover:border-green-400 rounded-lg p-4 text-center cursor-pointer text-lg font-semibold" data-bed="19">19</div>
                <div class="bed bg-white border-2 border-gray-300 hover:border-green-400 rounded-lg p-4 text-center cursor-pointer text-lg font-semibold" data-bed="19A">19A</div>
                <div class="bed bg-white border-2 border-gray-300 hover:border-green-400 rounded-lg p-4 text-center cursor-pointer text-lg font-semibold" data-bed="20">20</div>
                <div class="bed bg-white border-2 border-gray-300 hover:border-green-400 rounded-lg p-4 text-center cursor-pointer text-lg font-semibold" data-bed="21">21</div>
                <div class="bed bg-white border-2 border-gray-300 hover:border-green-400 rounded-lg p-4 text-center cursor-pointer text-lg font-semibold" data-bed="22">22</div>
                <div class="bed bg-white border-2 border-gray-300 hover:border-green-400 rounded-lg p-4 text-center cursor-pointer text-lg font-semibold" data-bed="23">23</div>
                <div class="bed bg-white border-2 border-gray-300 hover:border-green-400 rounded-lg p-4 text-center cursor-pointer text-lg font-semibold" data-bed="24">24</div>
                <div class="bed bg-white border-2 border-gray-300 hover:border-green-400 rounded-lg p-4 text-center cursor-pointer text-lg font-semibold" data-bed="25">25</div>
                <div class="bed bg-white border-2 border-gray-300 hover:border-green-400 rounded-lg p-4 text-center cursor-pointer text-lg font-semibold" data-bed="26">26</div>
                <div class="bed bg-white border-2 border-gray-300 hover:border-green-400 rounded-lg p-4 text-center cursor-pointer text-lg font-semibold" data-bed="27">27</div>
                <div class="bed bg-white border-2 border-gray-300 hover:border-green-400 rounded-lg p-4 text-center cursor-pointer text-lg font-semibold" data-bed="28">28</div>
                <div class="bed bg-white border-2 border-gray-300 hover:border-green-400 rounded-lg p-4 text-center cursor-pointer text-lg font-semibold" data-bed="29">29</div>
            </div>
        </div>

        <!-- Team 3 -->
        <div class="team-container bg-white rounded-lg p-6 mb-6">
            <h2 class="text-2xl font-bold text-center text-purple-700 mb-4">Team 3</h2>
            <div class="grid grid-cols-5 sm:grid-cols-8 md:grid-cols-10 lg:grid-cols-15 gap-3">
                <div class="bed bg-white border-2 border-gray-300 hover:border-purple-400 rounded-lg p-4 text-center cursor-pointer text-lg font-semibold" data-bed="30">30</div>
                <div class="bed bg-white border-2 border-gray-300 hover:border-purple-400 rounded-lg p-4 text-center cursor-pointer text-lg font-semibold" data-bed="31">31</div>
                <div class="bed bg-white border-2 border-gray-300 hover:border-purple-400 rounded-lg p-4 text-center cursor-pointer text-lg font-semibold" data-bed="32">32</div>
                <div class="bed bg-white border-2 border-gray-300 hover:border-purple-400 rounded-lg p-4 text-center cursor-pointer text-lg font-semibold" data-bed="33">33</div>
                <div class="bed bg-white border-2 border-gray-300 hover:border-purple-400 rounded-lg p-4 text-center cursor-pointer text-lg font-semibold" data-bed="34">34</div>
                <div class="bed bg-white border-2 border-gray-300 hover:border-purple-400 rounded-lg p-4 text-center cursor-pointer text-lg font-semibold" data-bed="35">35</div>
                <div class="bed bg-white border-2 border-gray-300 hover:border-purple-400 rounded-lg p-4 text-center cursor-pointer text-lg font-semibold" data-bed="36">36</div>
                <div class="bed bg-white border-2 border-gray-300 hover:border-purple-400 rounded-lg p-4 text-center cursor-pointer text-lg font-semibold" data-bed="37">37</div>
                <div class="bed bg-white border-2 border-gray-300 hover:border-purple-400 rounded-lg p-4 text-center cursor-pointer text-lg font-semibold" data-bed="38">38</div>
                <div class="bed bg-white border-2 border-gray-300 hover:border-purple-400 rounded-lg p-4 text-center cursor-pointer text-lg font-semibold" data-bed="39">39</div>
                <div class="bed bg-white border-2 border-gray-300 hover:border-purple-400 rounded-lg p-4 text-center cursor-pointer text-lg font-semibold" data-bed="40">40</div>
                <div class="bed bg-white border-2 border-gray-300 hover:border-purple-400 rounded-lg p-4 text-center cursor-pointer text-lg font-semibold" data-bed="41">41</div>
                <div class="bed bg-white border-2 border-gray-300 hover:border-purple-400 rounded-lg p-4 text-center cursor-pointer text-lg font-semibold" data-bed="42">42</div>
                <div class="bed bg-white border-2 border-gray-300 hover:border-purple-400 rounded-lg p-4 text-center cursor-pointer text-lg font-semibold" data-bed="43">43</div>
                <div class="bed bg-white border-2 border-gray-300 hover:border-purple-400 rounded-lg p-4 text-center cursor-pointer text-lg font-semibold" data-bed="44">44</div>
            </div>
        </div>

        <!-- çµ±è¨ˆè³‡è¨Š -->
        <div class="bg-white rounded-lg shadow-lg p-6">
            <h3 class="text-xl font-bold text-center text-gray-800 mb-4">ğŸ“Š ä½¿ç”¨çµ±è¨ˆ</h3>
            <div class="grid grid-cols-1 md:grid-cols-4 gap-4 text-center">
                <div class="bg-blue-50 rounded-lg p-4">
                    <div class="text-2xl font-bold text-blue-600" id="team1-count">0</div>
                    <div class="text-sm text-gray-600">Team 1 ä½¿ç”¨ä¸­</div>
                </div>
                <div class="bg-green-50 rounded-lg p-4">
                    <div class="text-2xl font-bold text-green-600" id="team2-count">0</div>
                    <div class="text-sm text-gray-600">Team 2 ä½¿ç”¨ä¸­</div>
                </div>
                <div class="bg-purple-50 rounded-lg p-4">
                    <div class="text-2xl font-bold text-purple-600" id="team3-count">0</div>
                    <div class="text-sm text-gray-600">Team 3 ä½¿ç”¨ä¸­</div>
                </div>
                <div class="bg-gray-50 rounded-lg p-4">
                    <div class="text-2xl font-bold text-gray-600" id="total-count">0</div>
                    <div class="text-sm text-gray-600">ç¸½è¨ˆä½¿ç”¨ä¸­</div>
                </div>
            </div>
        </div>
    </div>

    <!-- æ§åˆ¶æŒ‰éˆ• -->
    <button id="back" class="control-btn bg-gray-600 hover:bg-gray-700" style="left: 20px; right: auto; background-color: #4b5563;">ğŸ”™</button>
    <button id="lock-btn" class="control-btn">ğŸ”’</button>

    <script>
        // ç‹€æ…‹ç®¡ç†
        let bedStates = {};
        let history = [];
        let currentHistoryIndex = -1;
        let isLocked = false;

        // åˆå§‹åŒ–
        function init() {
            setupEventListeners();
            updateStats();
        }

        // è¨­ç½®äº‹ä»¶ç›£è½å™¨
        function setupEventListeners() {
            // åºŠä½é»æ“Šäº‹ä»¶
            document.querySelectorAll('.bed').forEach(bed => {
                bed.addEventListener('click', function() {
                    toggleBed(this.dataset.bed);
                });
            });

            // æ§åˆ¶æŒ‰éˆ•äº‹ä»¶
            document.getElementById('back').addEventListener('click', undo);
            document.getElementById('lock-btn').addEventListener('click', toggleLock);
        }

        // åˆ‡æ›åºŠä½ç‹€æ…‹
        function toggleBed(bedId) {
            if (!isLocked) {
                alert('ç³»çµ±æœªé–å®šï¼Œç·¨è¼¯å·²ç¦ç”¨ã€‚è«‹å…ˆé–å®šç³»çµ±æ‰èƒ½ä¿®æ”¹åºŠä½ç‹€æ…‹');
                return;
            }
            
            const bedElement = document.querySelector(`[data-bed="${bedId}"]`);
            const wasOn = bedStates[bedId] || false;
            
            // ä¿å­˜ç•¶å‰ç‹€æ…‹åˆ°æ­·å²è¨˜éŒ„
            saveToHistory();
            
            // åˆ‡æ›ç‹€æ…‹
            bedStates[bedId] = !wasOn;
            
            // æ›´æ–°è¦–è¦ºæ•ˆæœ
            if (bedStates[bedId]) {
                bedElement.classList.add('on');
                bedElement.style.backgroundColor = '#fbbf24';
                bedElement.style.fontWeight = 'bold';
                bedElement.style.transform = 'scale(1.05)';
            } else {
                bedElement.classList.remove('on');
                bedElement.style.backgroundColor = 'white';
                bedElement.style.fontWeight = 'normal';
                bedElement.style.transform = 'scale(1)';
            }
            
            // æ›´æ–°æœ€å¾Œæ›´æ–°æ™‚é–“
            updateLastUpdateTime();
            updateStats();
        }

        // ä¿å­˜åˆ°æ­·å²è¨˜éŒ„
        function saveToHistory() {
            const currentState = {
                states: {...bedStates},
                timestamp: new Date().toLocaleString('zh-HK')
            };
            
            // å¦‚æœä¸æ˜¯åœ¨æ­·å²è¨˜éŒ„çš„æœ«å°¾ï¼Œå‰‡æ¸…é™¤å¾Œé¢çš„è¨˜éŒ„
            if (currentHistoryIndex < history.length - 1) {
                history = history.slice(0, currentHistoryIndex + 1);
            }
            
            history.push(currentState);
            currentHistoryIndex = history.length - 1;
            
            // é™åˆ¶æ­·å²è¨˜éŒ„æ•¸é‡
            if (history.length > 50) {
                history.shift();
                currentHistoryIndex--;
            }
            

        }



        // åˆ‡æ›é–å®šç‹€æ…‹
        function toggleLock() {
            isLocked = !isLocked;
            const lockBtn = document.getElementById('lock-btn');
            
            if (isLocked) {
                // ç³»çµ±å·²é–å®š - é¡¯ç¤ºé–‹é–åœ–ç¤ºï¼Œè—è‰²èƒŒæ™¯ - ç·¨è¼¯å·²å•Ÿç”¨
                lockBtn.textContent = 'ğŸ”“';
                lockBtn.classList.add('locked');
                lockBtn.title = 'ç³»çµ±å·²é–å®šï¼Œç·¨è¼¯å·²å•Ÿç”¨ - é»æ“Šè§£é–';
            } else {
                // ç³»çµ±æœªé–å®š - é¡¯ç¤ºé–å®šåœ–ç¤ºï¼Œç´…è‰²èƒŒæ™¯ - ç·¨è¼¯å·²ç¦ç”¨
                lockBtn.textContent = 'ğŸ”’';
                lockBtn.classList.remove('locked');
                lockBtn.title = 'ç³»çµ±æœªé–å®šï¼Œç·¨è¼¯å·²ç¦ç”¨ - é»æ“Šé–å®š';
            }
            
            // æ›´æ–°æ§åˆ¶æŒ‰éˆ•çš„å¯ç”¨ç‹€æ…‹
            updateControlsState();
        }
        
        // æ›´æ–°æ§åˆ¶æŒ‰éˆ•ç‹€æ…‹
        function updateControlsState() {
            const backBtn = document.getElementById('back');
            
            if (!isLocked) {
                // ç³»çµ±æœªé–å®šæ™‚ï¼Œç·¨è¼¯è¢«ç¦ç”¨
                backBtn.disabled = true;
                backBtn.style.opacity = '0.5';
                backBtn.style.cursor = 'not-allowed';
                backBtn.style.pointerEvents = 'none';
            } else {
                // ç³»çµ±é–å®šæ™‚ï¼Œç·¨è¼¯è¢«å•Ÿç”¨
                backBtn.disabled = false;
                backBtn.style.opacity = '1';
                backBtn.style.cursor = 'pointer';
                backBtn.style.pointerEvents = 'auto';
            }
        }

        // æ’¤éŠ·æ“ä½œ
        function undo() {
            if (!isLocked) {
                alert('ç³»çµ±æœªé–å®šï¼Œç·¨è¼¯å·²ç¦ç”¨ã€‚è«‹å…ˆé–å®šç³»çµ±æ‰èƒ½åŸ·è¡Œæ­¤æ“ä½œ');
                return;
            }
            
            if (currentHistoryIndex > 0) {
                currentHistoryIndex--;
                const state = history[currentHistoryIndex];
                bedStates = {...state.states};
                
                // æ›´æ–°æ‰€æœ‰åºŠä½çš„è¦–è¦ºç‹€æ…‹
                document.querySelectorAll('.bed').forEach(bed => {
                    const bedId = bed.dataset.bed;
                    if (bedStates[bedId]) {
                        bed.classList.add('on');
                        bed.style.backgroundColor = '#fbbf24';
                        bed.style.fontWeight = 'bold';
                        bed.style.transform = 'scale(1.05)';
                    } else {
                        bed.classList.remove('on');
                        bed.style.backgroundColor = 'white';
                        bed.style.fontWeight = 'normal';
                        bed.style.transform = 'scale(1)';
                    }
                });
                
                // æ›´æ–°æœ€å¾Œæ›´æ–°æ™‚é–“
                updateLastUpdateTime();
                updateStats();
            }
        }

        // æ›´æ–°æœ€å¾Œæ›´æ–°æ™‚é–“
        function updateLastUpdateTime() {
            const now = new Date();
            document.getElementById('last-update').textContent = now.toLocaleString('zh-HK');
        }



        // ç²å–åœ˜éšŠä½¿ç”¨æ•¸é‡
        function getTeamCount(start, end) {
            let count = 0;
            for (let i = start; i <= end; i++) {
                if (bedStates[i.toString()] || bedStates[i + 'A']) count++;
            }
            return count;
        }

        // æ›´æ–°çµ±è¨ˆè³‡è¨Š
        function updateStats() {
            const team1Count = getTeamCount(1, 15);
            const team2Count = getTeamCount(16, 29);
            const team3Count = getTeamCount(30, 44);
            const totalCount = team1Count + team2Count + team3Count;
            
            document.getElementById('team1-count').textContent = team1Count;
            document.getElementById('team2-count').textContent = team2Count;
            document.getElementById('team3-count').textContent = team3Count;
            document.getElementById('total-count').textContent = totalCount;
            document.getElementById('total-used').textContent = totalCount;
        }

        // å•Ÿå‹•æ‡‰ç”¨
        init();
    </script>

<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'96a70a2646975c88',t:'MTc1NDQwNDcyMS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>