<!DOCTYPE html>
<html lang="zh-HK">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>1A IV Cap</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .bed {
            transition: all 0.3s ease;
            user-select: none;
        }
        .bed.on {
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        .team-container {
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }
        
        /* ÊéßÂà∂ÊåâÈàïÊ®£Âºè */
        .control-btn {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background-color: #dc2626;
            color: white;
            border: none;
            font-size: 24px;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            transition: all 0.3s ease;
            z-index: 1000;
        }
        
        .control-btn:hover {
            background-color: #b91c1c;
            transform: scale(1.1);
        }
        
        .control-btn.locked {
            background-color: #4f46e5;
        }
        
        .control-btn.locked:hover {
            background-color: #3730a3;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen font-sans">
    
    <div class="container mx-auto px-4 py-8">
        <h1 class="text-4xl font-bold text-center text-indigo-800 mb-8">üè• 1A IV cap</h1>

        <!-- ÊéßÂà∂Èù¢Êùø -->
        <div class="bg-white rounded-lg shadow-lg p-6 mb-8">
            
            <div class="flex flex-wrap items-center justify-center gap-4">
                <div class="text-gray-600">
                    <span class="font-medium">ÊúâIV cap ÁóÖ‰∫∫‰∫∫Êï∏:</span> <span id="total-used" class="text-red-600 font-bold text-xl">0</span>
                </div>
                <div class="text-gray-600">
                    <span class="font-medium">ÊúÄÂæåÊõ¥Êñ∞ÊôÇÈñì:</span> <span id="last-update" class="text-green-600 font-mono">Â∞öÊú™Êõ¥Êñ∞</span>
                </div>
            </div>
            
            <div class="mt-4 text-center">
                <div class="inline-flex items-center gap-4 text-sm text-gray-600">
                    <div class="flex items-center gap-2">
                        <div class="w-4 h-4 bg-white border border-gray-300 rounded"></div>
                        <span>No IV Cap</span>
                    </div>
                    <div class="flex items-center gap-2">
                        <div class="w-4 h-4 bg-yellow-400 rounded"></div>
                        <span>with IV cap</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Team 1 -->
        <div class="team-container bg-white rounded-lg p-6 mb-6">
            <h2 class="text-2xl font-bold text-center text-blue-700 mb-4">Team 1</h2>
            <div class="grid grid-cols-5 sm:grid-cols-8 md:grid-cols-10 lg:grid-cols-15 gap-3">
                <div class="bed bg-white border-2 border-gray-300 hover:border-blue-400 rounded-lg p-4 text-center cursor-pointer text-lg font-semibold" data-bed="1">1</div>
                <div class="bed bg-white border-2 border-gray-300 hover:border-blue-400 rounded-lg p-4 text-center cursor-pointer text-lg font-semibold" data-bed="2">2</div>
                <div class="bed bg-white border-2 border-gray-300 hover:border-blue-400 rounded-lg p-4 text-center cursor-pointer text-lg font-semibold" data-bed="3">3</div>
                <div class="bed bg-white border-2 border-gray-300 hover:border-blue-400 rounded-lg p-4 text-center cursor-pointer text-lg font-semibold" data-bed="4">4</div>
                <div class="bed bg-white border-2 border-gray-300 hover:border-blue-400 rounded-lg p-4 text-center cursor-pointer text-lg font-semibold" data-bed="5">5</div>
                <div class="bed bg-white border-2 border-gray-300 hover:border-blue-400 rounded-lg p-4 text-center cursor-pointer text-lg font-semibold" data-bed="6">6</div>
                <div class="bed bg-white border-2 border-gray-300 hover:border-blue-400 rounded-lg p-4 text-center cursor-pointer text-lg font-semibold" data-bed="7">7</div>
                <div class="bed bg-white border-2 border-gray-300 hover:border-blue-400 rounded-lg p-4 text-center cursor-pointer text-lg font-semibold" data-bed="8">8</div>
                <div class="bed bg-white border-2 border-gray-300 hover:border-blue-400 rounded-lg p-4 text-center cursor-pointer text-lg font-semibold" data-bed="9">9</div>
                <div class="bed bg-white border-2 border-gray-300 hover:border-blue-400 rounded-lg p-4 text-center cursor-pointer text-lg font-semibold" data-bed="10">10</div>
                <div class="bed bg-white border-2 border-gray-300 hover:border-blue-400 rounded-lg p-4 text-center cursor-pointer text-lg font-semibold" data-bed="11">11</div>
                <div class="bed bg-white border-2 border-gray-300 hover:border-blue-400 rounded-lg p-4 text-center cursor-pointer text-lg font-semibold" data-bed="12">12</div>
                <div class="bed bg-white border-2 border-gray-300 hover:border-blue-400 rounded-lg p-4 text-center cursor-pointer text-lg font-semibold" data-bed="13">13</div>
                <div class="bed bg-white border-2 border-gray-300 hover:border-blue-400 rounded-lg p-4 text-center cursor-pointer text-lg font-semibold" data-bed="14">14</div>
                <div class="bed bg-white border-2 border-gray-300 hover:border-blue-400 rounded-lg p-4 text-center cursor-pointer text-lg font-semibold" data-bed="15">15</div>
            </div>
        </div>

        <!-- Team 2 -->
        <div class="team-container bg-white rounded-lg p-6 mb-6">
            <h2 class="text-2xl font-bold text-center text-green-700 mb-4">Team 2</h2>
            <div class="grid grid-cols-5 sm:grid-cols-8 md:grid-cols-10 lg:grid-cols-15 gap-3">
                <div class="bed bg-white border-2 border-gray-300 hover:border-green-400 rounded-lg p-4 text-center cursor-pointer text-lg font-semibold" data-bed="16">16</div>
                <div class="bed bg-white border-2 border-gray-300 hover:border-green-400 rounded-lg p-4 text-center cursor-pointer text-lg font-semibold" data-bed="17">17</div>
                <div class="bed bg-white border-2 border-gray-300 hover:border-green-400 rounded-lg p-4 text-center cursor-pointer text-lg font-semibold" data-bed="18">18</div>
                <div class="bed bg-white border-2 border-gray-300 hover:border-green-400 rounded-lg p-4 text-center cursor-pointer text-lg font-semibold" data-bed="19">19</div>
                <div class="bed bg-white border-2 border-gray-300 hover:border-green-400 rounded-lg p-4 text-center cursor-pointer text-lg font-semibold" data-bed="19A">19A</div>
                <div class="bed bg-white border-2 border-gray-300 hover:border-green-400 rounded-lg p-4 text-center cursor-pointer text-lg font-semibold" data-bed="20">20</div>
                <div class="bed bg-white border-2 border-gray-300 hover:border-green-400 rounded-lg p-4 text-center cursor-pointer text-lg font-semibold" data-bed="21">21</div>
                <div class="bed bg-white border-2 border-gray-300 hover:border-green-400 rounded-lg p-4 text-center cursor-pointer text-lg font-semibold" data-bed="22">22</div>
                <div class="bed bg-white border-2 border-gray-300 hover:border-green-400 rounded-lg p-4 text-center cursor-pointer text-lg font-semibold" data-bed="23">23</div>
                <div class="bed bg-white border-2 border-gray-300 hover:border-green-400 rounded-lg p-4 text-center cursor-pointer text-lg font-semibold" data-bed="24">24</div>
                <div class="bed bg-white border-2 border-gray-300 hover:border-green-400 rounded-lg p-4 text-center cursor-pointer text-lg font-semibold" data-bed="25">25</div>
                <div class="bed bg-white border-2 border-gray-300 hover:border-green-400 rounded-lg p-4 text-center cursor-pointer text-lg font-semibold" data-bed="26">26</div>
                <div class="bed bg-white border-2 border-gray-300 hover:border-green-400 rounded-lg p-4 text-center cursor-pointer text-lg font-semibold" data-bed="27">27</div>
                <div class="bed bg-white border-2 border-gray-300 hover:border-green-400 rounded-lg p-4 text-center cursor-pointer text-lg font-semibold" data-bed="28">28</div>
                <div class="bed bg-white border-2 border-gray-300 hover:border-green-400 rounded-lg p-4 text-center cursor-pointer text-lg font-semibold" data-bed="29">29</div>
            </div>
        </div>

        <!-- Team 3 -->
        <div class="team-container bg-white rounded-lg p-6 mb-6">
            <h2 class="text-2xl font-bold text-center text-purple-700 mb-4">Team 3</h2>
            <div class="grid grid-cols-5 sm:grid-cols-8 md:grid-cols-10 lg:grid-cols-15 gap-3">
                <div class="bed bg-white border-2 border-gray-300 hover:border-purple-400 rounded-lg p-4 text-center cursor-pointer text-lg font-semibold" data-bed="30">30</div>
                <div class="bed bg-white border-2 border-gray-300 hover:border-purple-400 rounded-lg p-4 text-center cursor-pointer text-lg font-semibold" data-bed="31">31</div>
                <div class="bed bg-white border-2 border-gray-300 hover:border-purple-400 rounded-lg p-4 text-center cursor-pointer text-lg font-semibold" data-bed="32">32</div>
                <div class="bed bg-white border-2 border-gray-300 hover:border-purple-400 rounded-lg p-4 text-center cursor-pointer text-lg font-semibold" data-bed="33">33</div>
                <div class="bed bg-white border-2 border-gray-300 hover:border-purple-400 rounded-lg p-4 text-center cursor-pointer text-lg font-semibold" data-bed="34">34</div>
                <div class="bed bg-white border-2 border-gray-300 hover:border-purple-400 rounded-lg p-4 text-center cursor-pointer text-lg font-semibold" data-bed="35">35</div>
                <div class="bed bg-white border-2 border-gray-300 hover:border-purple-400 rounded-lg p-4 text-center cursor-pointer text-lg font-semibold" data-bed="36">36</div>
                <div class="bed bg-white border-2 border-gray-300 hover:border-purple-400 rounded-lg p-4 text-center cursor-pointer text-lg font-semibold" data-bed="37">37</div>
                <div class="bed bg-white border-2 border-gray-300 hover:border-purple-400 rounded-lg p-4 text-center cursor-pointer text-lg font-semibold" data-bed="38">38</div>
                <div class="bed bg-white border-2 border-gray-300 hover:border-purple-400 rounded-lg p-4 text-center cursor-pointer text-lg font-semibold" data-bed="39">39</div>
                <div class="bed bg-white border-2 border-gray-300 hover:border-purple-400 rounded-lg p-4 text-center cursor-pointer text-lg font-semibold" data-bed="40">40</div>
                <div class="bed bg-white border-2 border-gray-300 hover:border-purple-400 rounded-lg p-4 text-center cursor-pointer text-lg font-semibold" data-bed="41">41</div>
                <div class="bed bg-white border-2 border-gray-300 hover:border-purple-400 rounded-lg p-4 text-center cursor-pointer text-lg font-semibold" data-bed="42">42</div>
                <div class="bed bg-white border-2 border-gray-300 hover:border-purple-400 rounded-lg p-4 text-center cursor-pointer text-lg font-semibold" data-bed="43">43</div>
                <div class="bed bg-white border-2 border-gray-300 hover:border-purple-400 rounded-lg p-4 text-center cursor-pointer text-lg font-semibold" data-bed="44">44</div>
            </div>
        </div>

        <!-- Áµ±Ë®àË≥áË®ä -->
        <div class="bg-white rounded-lg shadow-lg p-6">
            <h3 class="text-xl font-bold text-center text-gray-800 mb-4">üìä ‰ΩøÁî®Áµ±Ë®à</h3>
            <div class="grid grid-cols-1 md:grid-cols-4 gap-4 text-center">
                <div class="bg-blue-50 rounded-lg p-4">
                    <div class="text-2xl font-bold text-blue-600" id="team1-count">0</div>
                    <div class="text-sm text-gray-600">Team 1 ‰ΩøÁî®‰∏≠</div>
                </div>
                <div class="bg-green-50 rounded-lg p-4">
                    <div class="text-2xl font-bold text-green-600" id="team2-count">0</div>
                    <div class="text-sm text-gray-600">Team 2 ‰ΩøÁî®‰∏≠</div>
                </div>
                <div class="bg-purple-50 rounded-lg p-4">
                    <div class="text-2xl font-bold text-purple-600" id="team3-count">0</div>
                    <div class="text-sm text-gray-600">Team 3 ‰ΩøÁî®‰∏≠</div>
                </div>
                <div class="bg-gray-50 rounded-lg p-4">
                    <div class="text-2xl font-bold text-gray-600" id="total-count">0</div>
                    <div class="text-sm text-gray-600">Á∏ΩË®à‰ΩøÁî®‰∏≠</div>
                </div>
            </div>
        </div>
    </div>

    <!-- ÊéßÂà∂ÊåâÈàï -->
    <button id="back" class="control-btn bg-gray-600 hover:bg-gray-700" style="left: 20px; right: auto; background-color: #4b5563;">üîô</button>
    <button id="lock-btn" class="control-btn">üîí</button>

    <script>
        // ÁãÄÊÖãÁÆ°ÁêÜ
        let bedStates = {};
        let history = [];
        let currentHistoryIndex = -1;
        let isLocked = false;

        // ÂàùÂßãÂåñ
        function init() {
            setupEventListeners();
            updateStats();
        }

        // Ë®≠ÁΩÆ‰∫ã‰ª∂Áõ£ËÅΩÂô®
        function setupEventListeners() {
            // Â∫ä‰ΩçÈªûÊìä‰∫ã‰ª∂
            document.querySelectorAll('.bed').forEach(bed => {
                bed.addEventListener('click', function() {
                    toggleBed(this.dataset.bed);
                });
            });

            // ÊéßÂà∂ÊåâÈàï‰∫ã‰ª∂
            document.getElementById('back').addEventListener('click', undo);
            document.getElementById('lock-btn').addEventListener('click', toggleLock);
        }

        // ÂàáÊèõÂ∫ä‰ΩçÁãÄÊÖã
        function toggleBed(bedId) {
            if (!isLocked) {
                alert('Á≥ªÁµ±Êú™ÈéñÂÆöÔºåÁ∑®ËºØÂ∑≤Á¶ÅÁî®„ÄÇË´ãÂÖàÈéñÂÆöÁ≥ªÁµ±ÊâçËÉΩ‰øÆÊîπÂ∫ä‰ΩçÁãÄÊÖã');
                return;
            }
            
            const bedElement = document.querySelector(`[data-bed="${bedId}"]`);
            const wasOn = bedStates[bedId] || false;
            
            // ‰øùÂ≠òÁï∂ÂâçÁãÄÊÖãÂà∞Ê≠∑Âè≤Ë®òÈåÑ
            saveToHistory();
            
            // ÂàáÊèõÁãÄÊÖã
            bedStates[bedId] = !wasOn;
            
            // Êõ¥Êñ∞Ë¶ñË¶∫ÊïàÊûú
            if (bedStates[bedId]) {
                bedElement.classList.add('on');
                bedElement.style.backgroundColor = '#fbbf24';
                bedElement.style.fontWeight = 'bold';
                bedElement.style.transform = 'scale(1.05)';
            } else {
                bedElement.classList.remove('on');
                bedElement.style.backgroundColor = 'white';
                bedElement.style.fontWeight = 'normal';
                bedElement.style.transform = 'scale(1)';
            }
            
            // Êõ¥Êñ∞ÊúÄÂæåÊõ¥Êñ∞ÊôÇÈñì
            updateLastUpdateTime();
            updateStats();
        }

        // ‰øùÂ≠òÂà∞Ê≠∑Âè≤Ë®òÈåÑ
        function saveToHistory() {
            const currentState = {
                states: {...bedStates},
                timestamp: new Date().toLocaleString('zh-HK')
            };
            
            // Â¶ÇÊûú‰∏çÊòØÂú®Ê≠∑Âè≤Ë®òÈåÑÁöÑÊú´Â∞æÔºåÂâáÊ∏ÖÈô§ÂæåÈù¢ÁöÑË®òÈåÑ
            if (currentHistoryIndex < history.length - 1) {
                history = history.slice(0, currentHistoryIndex + 1);
            }
            
            history.push(currentState);
            currentHistoryIndex = history.length - 1;
            
            // ÈôêÂà∂Ê≠∑Âè≤Ë®òÈåÑÊï∏Èáè
            if (history.length > 50) {
                history.shift();
                currentHistoryIndex--;
            }
            

        }



        // ÂàáÊèõÈéñÂÆöÁãÄÊÖã
        function toggleLock() {
            isLocked = !isLocked;
            const lockBtn = document.getElementById('lock-btn');
            
            if (isLocked) {
                // Á≥ªÁµ±Â∑≤ÈéñÂÆö - È°ØÁ§∫ÈñãÈéñÂúñÁ§∫ÔºåËóçËâ≤ËÉåÊôØ - Á∑®ËºØÂ∑≤ÂïüÁî®
                lockBtn.textContent = 'üîì';
                lockBtn.classList.add('locked');
                lockBtn.title = 'Á≥ªÁµ±Â∑≤ÈéñÂÆöÔºåÁ∑®ËºØÂ∑≤ÂïüÁî® - ÈªûÊìäËß£Èéñ';
            } else {
                // Á≥ªÁµ±Êú™ÈéñÂÆö - È°ØÁ§∫ÈéñÂÆöÂúñÁ§∫ÔºåÁ¥ÖËâ≤ËÉåÊôØ - Á∑®ËºØÂ∑≤Á¶ÅÁî®
                lockBtn.textContent = 'üîí';
                lockBtn.classList.remove('locked');
                lockBtn.title = 'Á≥ªÁµ±Êú™ÈéñÂÆöÔºåÁ∑®ËºØÂ∑≤Á¶ÅÁî® - ÈªûÊìäÈéñÂÆö';
            }
            
            // Êõ¥Êñ∞ÊéßÂà∂ÊåâÈàïÁöÑÂèØÁî®ÁãÄÊÖã
            updateControlsState();
        }
        
        // Êõ¥Êñ∞ÊéßÂà∂ÊåâÈàïÁãÄÊÖã
        function updateControlsState() {
            const backBtn = document.getElementById('back');
            
            if (!isLocked) {
                // Á≥ªÁµ±Êú™ÈéñÂÆöÊôÇÔºåÁ∑®ËºØË¢´Á¶ÅÁî®
                backBtn.disabled = true;
                backBtn.style.opacity = '0.5';
                backBtn.style.cursor = 'not-allowed';
                backBtn.style.pointerEvents = 'none';
            } else {
                // Á≥ªÁµ±ÈéñÂÆöÊôÇÔºåÁ∑®ËºØË¢´ÂïüÁî®
                backBtn.disabled = false;
                backBtn.style.opacity = '1';
                backBtn.style.cursor = 'pointer';
                backBtn.style.pointerEvents = 'auto';
            }
        }

        // Êí§Èä∑Êìç‰Ωú
        function undo() {
            if (!isLocked) {
                alert('Á≥ªÁµ±Êú™ÈéñÂÆöÔºåÁ∑®ËºØÂ∑≤Á¶ÅÁî®„ÄÇË´ãÂÖàÈéñÂÆöÁ≥ªÁµ±ÊâçËÉΩÂü∑Ë°åÊ≠§Êìç‰Ωú');
                return;
            }
            
            if (currentHistoryIndex > 0) {
                currentHistoryIndex--;
                const state = history[currentHistoryIndex];
                bedStates = {...state.states};
                
                // Êõ¥Êñ∞ÊâÄÊúâÂ∫ä‰ΩçÁöÑË¶ñË¶∫ÁãÄÊÖã
                document.querySelectorAll('.bed').forEach(bed => {
                    const bedId = bed.dataset.bed;
                    if (bedStates[bedId]) {
                        bed.classList.add('on');
                        bed.style.backgroundColor = '#fbbf24';
                        bed.style.fontWeight = 'bold';
                        bed.style.transform = 'scale(1.05)';
                    } else {
                        bed.classList.remove('on');
                        bed.style.backgroundColor = 'white';
                        bed.style.fontWeight = 'normal';
                        bed.style.transform = 'scale(1)';
                    }
                });
                
                // Êõ¥Êñ∞ÊúÄÂæåÊõ¥Êñ∞ÊôÇÈñì
                updateLastUpdateTime();
                updateStats();
            }
        }

        // Êõ¥Êñ∞ÊúÄÂæåÊõ¥Êñ∞ÊôÇÈñì
        function updateLastUpdateTime() {
            const now = new Date();
            document.getElementById('last-update').textContent = now.toLocaleString('zh-HK');
        }



        // Áç≤ÂèñÂúòÈöä‰ΩøÁî®Êï∏Èáè
        function getTeamCount(start, end) {
            let count = 0;
            for (let i = start; i <= end; i++) {
                if (bedStates[i.toString()] || bedStates[i + 'A']) count++;
            }
            return count;
        }

        // Êõ¥Êñ∞Áµ±Ë®àË≥áË®ä
        function updateStats() {
            const team1Count = getTeamCount(1, 15);
            const team2Count = getTeamCount(16, 29);
            const team3Count = getTeamCount(30, 44);
            const totalCount = team1Count + team2Count + team3Count;
            
            document.getElementById('team1-count').textContent = team1Count;
            document.getElementById('team2-count').textContent = team2Count;
            document.getElementById('team3-count').textContent = team3Count;
            document.getElementById('total-count').textContent = totalCount;
            document.getElementById('total-used').textContent = totalCount;
        }

        // ÂïüÂãïÊáâÁî®
        init();
    </script>

<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'96a70a2646975c88',t:'MTc1NDQwNDcyMS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>